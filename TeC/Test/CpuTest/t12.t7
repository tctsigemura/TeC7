INT1V	EQU	0DDH
BUZZ	EQU	00H
SIOD	EQU	02H
SIOC	EQU	03H

START	LD	SP,#0DCH
	LD	G0,#SIORINT
	ST	G0,INT1V
	LD	G0,#40H
	OUT	G0,SIOC
	LD	G0,#'a'
	ST	G0,IKEY
	EI 
LOOP	LD	G0,IKEY
	ST	G0,KEY
	CMP	G0,#'z'
	JZ	END
	LD	G0,#'a'
L1	CALL	MS200
	CMP	G0,KEY
	JZ	L2
	ADD	G0,#1
	JMP	L1
L2	LD	G0,#1
	OUT	G0,BUZZ
	LD	G0,#'a'
L3	CALL	MS200
	CMP	G0,KEY
	JZ	L4
	ADD	G0,#1
	JMP	L3
L4	LD	G0,#0
	OUT	G0,BUZZ
	JMP	LOOP
END	HALT

MS200	PUSH	G0
	LD	G0,#200
L5	CALL	MS1
	SUB	G0,#1
	JZ	L6
	JMP	L5
L6	POP	G0
	RET 
MS1 	PUSH	G0
	LD	G0,#174
MATU	SUB	G0,#1
	JZ	KAERU
	JMP	MATU
KAERU	POP	G0
	RET
	
KEY	DS	1
IKEY	DS	1

SIORINT	PUSH	G0
	IN 	G0,SIOD
	ST	G0,IKEY
	POP	G0
	RETI