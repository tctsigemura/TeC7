;教科書p76　タイマ割り込みプログラムの例
BUZ	EQU	00H
TMRVCT	EQU	0DCH
TMRCNT	EQU	4
TMRCTR	EQU	5
START	;メインプログラム
	LD	SP,#0DCH
	LD	G0,#TMRINT
	ST 	G0,TMRVCT
	LD	G0,#74
	OUT	G0,TMRCNT
	LD	G0,#81H
	OUT	G0,TMRCTR
	EI 
WAIT	LD	G0,FLG
	CMP	G0,#0
	JZ	WAIT
	LD	G0,VAL
	XOR	G0,#01H
	ST	G0,VAL
	OUT	G0,BUZ
	LD	G0,#0
	ST	G0,FLG
	JMP	WAIT

	;共有変数
FLG	DC 	0
VAL	DC 	0

	;割り込みルーチン
TMRINT	PUSH	G0
	LD	G0,#1
	ST	G0,FLG
	POP	G0
	RETI